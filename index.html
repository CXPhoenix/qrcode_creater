<!DOCTYPE html>
<html lang="zh-tw">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QRcode Creater</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
</head>
<body>
    <header>
        <div class="container-fluid">
            <div class="row justify-content-center align-items-center bg-light" style="height: 150px;">
                <div class="col text-center fs-1 justify-content-center"><span class="border border-3 p-2">QRcode Creater</span></div>
            </div>
        </div>
    </header>

    <section>
        <div class="container mt-5">
            <div class="row">
                <div class="col-md-4 text-md-end text-center mb-2"><span class="fs-3">要轉換的文字<span class="d-none d-md-inline-block">: </span></span></div>
                <div class="col-md-6 d-grid d-md-inline-block align-items-center">
                    <input id="qrcodeData" class="form-control form-control-lg" type="text" name="qrcodeText" id="qrcodeText" placeholder="Your Text" />
                </div>
            </div>
        </div>
    </section>

    <section>
        <div class="container mt-4">
            <div class="row">
                <div class="col-md-4 text-md-end text-center mb-2"><span class="fs-3">QRcode 大小 (<span id="sizeValue"></span>)<span class="d-none d-md-inline-block">: </span></span></div>
                <div class="col-md-6 d-grid align-items-center">
                    <input id="sizeRange" class="form-range" type="range" min="100" max="1000" step="10" />
                </div>
            </div>
        </div>
    </section>

    <section>
        <div class="container mt-5 mt-md-3">
            <div class="row justify-content-end">
                <div class="col-md-4 d-grid">
                    <button id="createBtn" class="btn btn-lg btn-success align-self-end fs-4">Create!</button>
                </div>
            </div>
        </div>
    </section>

    <section>
        <div id="qrcodeLoading" class="spinner-border text-danger mx-auto my-5 align-items-center" role="status" style="display: none;width: 6rem; height: 6rem;">
            <span class="visually-hidden">Loading...</span>
          </div>
        <img id="image" src="" alt="" title="" class="mx-auto my-5" style="display: none;" />
    </section>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
    <script src='./js/index.js'></script>
    <!-- <script>
        let data = ''
        let size = ''
        let api = 'https://api.qrserver.com/v1/create-qr-code/?'
        let dataUrl = 'data='
        let sizeUrl = '&size='
        const img = document.querySelector('#image')
        const imgData = document.querySelector('#qrcodeData')
        const imgSize = document.querySelector('#sizeRange')
        const createBtn = document.querySelector('#createBtn')
        const realtimeSizeValue = document.querySelector('#sizeValue')
        const loadingHint = document.querySelector('#qrcodeLoading')
        realtimeSizeValue.innerHTML = imgSize.value
        
        const realtimeSizeShow = () => {
            realtimeSizeValue.innerHTML = imgSize.value
        }

        imgSize.addEventListener('input', realtimeSizeShow)
        
        createBtn.onclick = () => {
            img.style.display = 'none'
            console.log('begin')
            data = imgData.value
            if (data !== '') {
                loadingHint.style.display = 'block'
                imgData.readOnly = true
                imgSize.readOnly = true
                size = imgSize.value + 'x' + imgSize.value
                let endPoint = api+ dataUrl+ data+ sizeUrl+ size

                setTimeout(() => {
                    img.src = endPoint
                    img.alt = data
                    img.title = data + '_' + size
                    img.style.display = 'block'
                    imgData.readOnly = false
                    imgSize.readOnly = false
                    imgSize.value = Math.round(((Number(imgSize.max) + Number(imgSize.min)) / 2)/10)*10
                    realtimeSizeValue.innerHTML = imgSize.value
                    loadingHint.style.display = 'none'
                    imgData.value = ''
                },1500)
            } else {
                window.alert('你需要輸入欲轉換的文字或網址喔！')
                console.log("Fail")
            }
        }

        window.addEventListener('resize',() => {
            imgSize.max = Math.round(window.innerWidth/10)*10
            if (imgSize.max > 1000) {
                imgSize.max = 1000
                return
            }
            imgSize.value = Math.round(((Number(imgSize.max) + Number(imgSize.min)) / 2)/10)*10
            realtimeSizeValue.innerHTML = imgSize.value
        })
        
    </script> -->
</body>
</html>